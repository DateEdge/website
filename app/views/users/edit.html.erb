<% if flash[:error] or flash[:notice] %>
  <div>
    <%= flash[:error] %>
    <%= flash[:notice] %>
  </div>
<% end %>

<% unless @user.twitter? && @user.facebook? %>
  <div class="buttons">
    <% if @user.twitter? %>
      <%= button_to_sign_in_with(:facebook) %>
    <% elsif @user.facebook? %>
      <%= button_to_sign_in_with(:twitter) %>
    <% end %>
  </div>

  <p class="note">
    Connecting both your Twitter and Facebook accounts makes it easier to fill out your Date Edge profile, which helps you find people.
  </p>

  <p class="note">
    And if Twitter or Facebook ever has downtime, you can use the other to sign in to Date Edge.
  </p>
<% end %>

<%= @user.errors.full_messages.to_sentence %>

<%= form_for @user, url: update_settings_path, html: { class: "form" } do |f| %>
  <div class="form-group">
    <%= f.label      :name %>
    <%= f.text_field :name, autocapitalize: "words", class: "form-control" %>
  </div>

  <% if @user.username.blank? %>
    <div class="form-group">
      <%= f.label      :username %>
      <%= f.text_field :username, autocapitalize: "off", autocorrect: "off", class: "form-control" %>
    </div>
  <% end %>

  <div class="form-group">
    <%= f.label       :email %>
    <%= f.email_field :email, autocapitalize: "off", autocorrect: "off", class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label :birthday %>
    <%= birthday_select_tag(f) %>
  </div>

  <div class="form-group">
    <%= f.label      :city %>
    <%= f.text_field :city, autocapitalize: "words", class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label  :state %>
    <%= f.select :state_id, State.options_for_select, { include_blank: true }, { class: "form-control" } %>
  </div>

  <div class="form-group">
    <%= f.label      :zipcode %>
    <%= f.text_field :zipcode, autocapitalize: "characters", class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label  :country %>
    <%= f.select :country_id, Country.options_for_select, { include_blank: true }, { class: "form-control" } %>
  </div>

  <div class="form-group">
    <%= f.label     :bio %>
    <%= f.text_area :bio, autocapitalize: "sentences", class: "form-control", rows: 8 %>
  </div>

  <div class="form-group">
    <%= f.label  :diet %>
    <%= f.select :diet_id, Diet.options_for_select, { include_blank: true }, { class: "form-control" } %>

    <%# f.select :object_field, ['Item 1', ...], {}, { :class => 'my_style_class' } %>

  </div>

  <div class="form-group">
    <%= f.label      :me_gender,  "My Gender" %>
    <%= f.text_field :me_gender,  autocapitalize: "words", class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label      :you_gender, "Desired Gender" %>
    <%= f.text_field :you_gender, autocapitalize: "words", class: "form-control" %>
  </div>

  <div class="form-group">
    <%= f.label :label_id, "My Straightedginess" %>
    <% Label.all.each do |label| %>
      <div class="radio">
        <label>
          <%= f.radio_button :label_id, label.id %>
          <%= label.name.titleize %>
        </label>
      </div>
    <% end %>
  </div>

  <div class="form-group">
    <%= f.label :your_labels_attributes, "Desired Straightedginess" %>

    <% Label.all.each_with_index do |label, index| %>
      <%= f.fields_for "your_labels_attributes[#{index}]", child_index: index do |ff| %>
        <% if @label_assignements.has_key? label.id %>
          <%= ff.hidden_field :id, value: @label_assignements[label.id], style: "display:none" %>

          <div class="checkbox">
            <label>
              <%= ff.check_box :_destroy, { checked: true }, 0, 1 %>
              <%= label.name.titleize %>
            </label>
          </div>
        <% else %>
          <div class="checkbox">
            <label>
              <%= ff.check_box :label_id, {}, label.id %>
              <%= ff.label     :label_id, label.name.titleize %>
            </label>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>

  <%= f.submit "Save Changes", disable_with: "Saving&hellip;".html_safe, class: "btn btn-success btn-block btn-lg" %>
<% end %>



<div id="danger-zone">
  <h2>DANGER ZONE</h2>

  <div>
    <p>
      If you want to leave this place, that&rsquo;s your decision.
      We&rsquo;ll be sad to see you go, but we can respect that.
    </p>

    <p>
      All of your user profile and related data will be immediately deleted.
      No Twitter or Facebook information will be further stored.
    </p>

    <p>
      <b>There is no undo. No regrets.</b>
    </p>

    <%= button_to "I Want to Delete My Profile",
                  user_path(@user),
                  method:  :delete,
                  confirm: "Uhhhh&hellip; Are you sure you want to delete your profile?".html_safe,
                  class:   "btn btn-danger btn-block btn-lg" %>
  </div>
</div> <!-- #danger-zone -->
